{"ast":null,"code":"import _regeneratorRuntime from \"/home/rails/demo/redux-react -saga29/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(addPost),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(Post),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(deletePost),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(update),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(add_user),\n    _marked6 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport { takeLatest, takeEvery, put, all } from 'redux-saga/effects';\n\nfunction addPost(action) {\n  var post, token, url;\n  return _regeneratorRuntime.wrap(function addPost$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          post = JSON.stringify(action.post);\n          token = localStorage.getItem('token');\n          console.log(\"token in addpost\", token);\n          _context.prev = 3;\n          url = \"http://localhost:3003/posts/\";\n          _context.next = 7;\n          return fetch(url, {\n            method: 'POST',\n            body: post,\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': 'Bearer ' + token\n            }\n          }).then(function (res) {\n            return res.json();\n          }).then(function (response) {\n            return console.log(\"POST Done\", response);\n          });\n\n        case 7:\n          _context.next = 12;\n          break;\n\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](3);\n          alert('error' + _context.t0);\n\n        case 12:\n          _context.next = 14;\n          return put({\n            type: 'ADD_NEW_POST_ASYNC',\n            value: post\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this, [[3, 9]]);\n}\n\nfunction Post() {\n  var data;\n  return _regeneratorRuntime.wrap(function Post$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          console.log(\"POST is Calling..\");\n          _context2.prev = 1;\n          _context2.next = 4;\n          return fetch(\"http://localhost:3003/posts\", {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }).then(function (res) {\n            return res.json();\n          });\n\n        case 4:\n          data = _context2.sent;\n          _context2.next = 7;\n          return put({\n            type: 'POST_ASYNC',\n            value: data\n          });\n\n        case 7:\n          _context2.next = 12;\n          break;\n\n        case 9:\n          _context2.prev = 9;\n          _context2.t0 = _context2[\"catch\"](1);\n          console.log(_context2.t0);\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this, [[1, 9]]);\n}\n\nfunction deletePost(action) {\n  var token;\n  return _regeneratorRuntime.wrap(function deletePost$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          token = localStorage.getItem('token');\n          console.log(\"token in DELETE\", token);\n          console.log('delete is calling from saga..', action._id);\n          fetch('http://localhost:3003/posts/' + action._id, {\n            method: 'delete'\n          }).then(function (res) {\n            return res.json();\n          }).then(function (response) {\n            return console.log(\"Delete Done\", response);\n          });\n          _context3.next = 6;\n          return put({\n            type: 'DELETE_POST'\n          });\n\n        case 6:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this);\n}\n\nfunction update(action) {\n  var data;\n  return _regeneratorRuntime.wrap(function update$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          console.log('update is from generator function');\n          data = JSON.stringify(action.data);\n          _context4.prev = 2;\n          alert(data);\n          _context4.next = 6;\n          return fetch('http://localhost:3003/posts/' + action.data.id, {\n            method: 'PATCH',\n            body: data,\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }).then(function (res) {\n            return res.json();\n          }).then(function (response) {\n            return console.log(\"UPDATE Done\", response);\n          });\n\n        case 6:\n          _context4.next = 11;\n          break;\n\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](2);\n          alert('error-------' + _context4.t0);\n\n        case 11:\n          _context4.next = 13;\n          return put({\n            type: 'UPDATA_ASYNC'\n          });\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this, [[2, 8]]);\n}\n\nfunction add_user(action) {\n  var user;\n  return _regeneratorRuntime.wrap(function add_user$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          user = JSON.stringify(action.userData);\n          console.log(user);\n          _context5.prev = 2;\n          _context5.next = 5;\n          return fetch('http://localhost:3003/user/signup', {\n            method: 'POST',\n            body: user,\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }).then(function (res) {\n            return res.json();\n          }).then(function (response) {\n            return console.log(\"user createddsfdsfff\", response);\n          });\n\n        case 5:\n          _context5.next = 10;\n          break;\n\n        case 7:\n          _context5.prev = 7;\n          _context5.t0 = _context5[\"catch\"](2);\n          alert('error' + _context5.t0);\n\n        case 10:\n          _context5.next = 12;\n          return put({\n            type: 'ADD_NEW_USER',\n            value: user\n          });\n\n        case 12:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this, [[2, 7]]);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          console.log(\"root saga\");\n          _context6.t0 = all;\n          _context6.next = 4;\n          return takeLatest('POST', Post);\n\n        case 4:\n          _context6.t1 = _context6.sent;\n          _context6.next = 7;\n          return takeLatest('ADD_POST', addPost);\n\n        case 7:\n          _context6.t2 = _context6.sent;\n          _context6.next = 10;\n          return takeEvery('DELETE', deletePost);\n\n        case 10:\n          _context6.t3 = _context6.sent;\n          _context6.next = 13;\n          return takeEvery('UPDATE', update);\n\n        case 13:\n          _context6.t4 = _context6.sent;\n          _context6.next = 16;\n          return takeEvery('ADD_USER', add_user);\n\n        case 16:\n          _context6.t5 = _context6.sent;\n          _context6.t6 = [_context6.t1, _context6.t2, _context6.t3, _context6.t4, _context6.t5];\n          _context6.next = 20;\n          return (0, _context6.t0)(_context6.t6);\n\n        case 20:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, this);\n}","map":{"version":3,"sources":["/home/rails/demo/redux-react -saga29/src/sagas.js"],"names":["addPost","Post","deletePost","update","add_user","rootSaga","takeLatest","takeEvery","put","all","action","post","JSON","stringify","token","localStorage","getItem","console","log","url","fetch","method","body","headers","then","res","json","response","alert","type","value","data","_id","id","user","userData"],"mappings":"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","sourcesContent":["import { takeLatest,takeEvery,put,all} from 'redux-saga/effects';\n\nfunction* addPost(action)\n{\n\tconst post=JSON.stringify(action.post)\n\tconst token=localStorage.getItem('token')\n\tconsole.log(\"token in addpost\",token)\n\ttry{\n\t\tvar url=\"http://localhost:3003/posts/\"\n\t\tyield fetch(url,{\n\t\t\tmethod:'POST',\n\t\t\tbody:post,\n\t\t\theaders: {'Content-Type':'application/json',\n\t\t\t\t\t'Authorization':'Bearer '+token\n\t\t\t},\n\t\t})\n\t\t.then(res=>res.json())\n\t\t.then(response => console.log(\"POST Done\",response))\n\t}\n\n\tcatch(err)\n\t{\n\t\talert('error'+err)\n\t}\n\n\tyield put({type:'ADD_NEW_POST_ASYNC',value:post})\n\t//window.location.reload('root')\n}\n\nfunction* Post()\n{\n\tconsole.log(\"POST is Calling..\")\n\ttry{\n\t\tconst data =  yield fetch(\"http://localhost:3003/posts\",{\n\t\t\tmethod:'GET',\n\t\t\theaders: {'Content-Type':'application/json'},\n\n\t\t}\n\t).then(res=>res.json());\n\t\tyield put({type:'POST_ASYNC',value:data})\n\t}\n\n\tcatch(err){\n\t\tconsole.log(err);\n\t}\n}\n\nfunction* deletePost(action)\n{\n\tconst token=localStorage.getItem('token')\n\tconsole.log(\"token in DELETE\",token)\n\tconsole.log('delete is calling from saga..',action._id);\n\n\tfetch('http://localhost:3003/posts/'+action._id,{\n\t\tmethod: 'delete',\n\t})\n\t.then(res=>res.json())\n\t.then(response => console.log(\"Delete Done\",response))\n\n\tyield put({type:'DELETE_POST'})\n\t//window.location.reload('root')\n\n}\n\nfunction* update(action){\n\tconsole.log('update is from generator function');\n\tconst data = JSON.stringify(action.data)\n\n\ttry{\n\t\talert(data)\n\t\tyield fetch('http://localhost:3003/posts/'+action.data.id,{\n\t\t\tmethod: 'PATCH',\n\t\t\tbody:data,\n\t\t\theaders: {'Content-Type':'application/json'},\n\t\t})\n\t\t.then(res=>res.json())\n\t\t.then(response => console.log(\"UPDATE Done\",response))\n\t}\n\tcatch(err){\n\t\talert('error-------'+err)\n\t}\n\tyield put({type:'UPDATA_ASYNC'})\n\t//window.location.reload('root')\n}\n\nfunction* add_user(action){\n\tconst user=JSON.stringify(action.userData)\n\tconsole.log(user)\n\ttry{\n\t\tyield fetch('http://localhost:3003/user/signup',{\n\t\t\tmethod:'POST',\n\t\t\tbody:user,\n\t\t\theaders: {'Content-Type':'application/json'}\n\t\t})\n\t\t.then(res=>res.json())\n\t\t.then(response => console.log(\"user createddsfdsfff\",response))\n\t}\n\n\tcatch(err)\n\t{\n\t\talert('error'+err)\n\t}\n\tyield put({type:'ADD_NEW_USER',value:user})\n\n}\n\n\n\nexport default function* rootSaga(){\n\tconsole.log(\"root saga\")\n\tyield all([\n\t\tyield takeLatest('POST',Post),\n\t\tyield takeLatest('ADD_POST',addPost),\n\t\tyield takeEvery('DELETE',deletePost),\n\t\tyield takeEvery('UPDATE',update),\n\t\tyield takeEvery('ADD_USER',add_user),\n\n\t])\n}"]},"metadata":{},"sourceType":"module"}